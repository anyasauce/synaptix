<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SynaptixChat Pro</title>
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <link rel="stylesheet" href="assets/css/google-font.css">
    <link rel="stylesheet" href="assets/css/sweetalert2.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <div id="sidebar" class="sidebar collapse show d-flex flex-column">
        <h5 style="color: white;" class="text-center mb-4">SynaptixChat Pro</h5>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link active" href="#">
                    <i class="bi bi-house-door"></i> Home
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#helpModal">
                    <i class="bi bi-question-circle"></i> Help
                </a>
            </li>
        </ul>
        <div class="sidebar-footer mt-auto text-center" style="padding: 10px; color: white;">
            <p>&copy; 2024 Josiah AI</p>
            <a href="#" class="text-white" style="text-decoration: none;" data-bs-toggle="modal" data-bs-target="#privacyModal">Privacy Policy</a> |
            <a href="#" class="text-white" style="text-decoration: none;" data-bs-toggle="modal" data-bs-target="#termsModal">Terms of Service</a>
        </div>
    </div>

    <div class="content">
        <button id="toggleSidebar" class="btn btn-secondary mb-3" type="button" data-bs-toggle="collapse" data-bs-target="#sidebar" aria-expanded="false" aria-controls="sidebar">
            <i class="bi bi-list"></i>
        </button>

        <h2 id="synaptixChatPro">SynaptixChat Pro</h2>
        <div id="loading" style="display: none;" class="text-center mt-3 mb-3">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <div style="color:white;">Please wait while we process your message...</div>
        </div>
        <div id="chat" class="chat-window border p-3 mb-3" style="height: 500px; overflow-y: scroll;"></div>
        <div class="input-group mb-3">
            <textarea id="message" class="form-control" placeholder="Message SynaptixChat Pro" aria-label="User message" onkeypress="checkEnter(event)" rows="3"></textarea>
            <button class="btn btn-primary" onclick="sendMessage()">Send</button>
        </div>
        <div class="feedback-section text-center mt-4 mb-5">
            <h6 style="color:white;">Was this response helpful?</h6>
            <button class="btn btn-success" onclick="sendFeedback(true)">Yes</button>
            <button class="btn btn-danger" onclick="sendFeedback(false)">No</button>
        </div>
        <div class="sidebar-footer mt-auto text-center" style="padding: 10px; color: white;">
            <p>&copy; 2024 Josiah AI</p>
            <a href="#" class="text-white" style="text-decoration: none;" data-bs-toggle="modal" data-bs-target="#privacyModal">Privacy Policy</a> |
            <a href="#" class="text-white" style="text-decoration: none;" data-bs-toggle="modal" data-bs-target="#termsModal">Terms of Service</a>
        </div>
    </div>

    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/sweetalert2.min.js"></script>

<script>
async function sendMessage() {
    const messageInput = document.getElementById('message');
    const message = messageInput.value.trim();
    if (!message) return;

    const chat = document.getElementById('chat');
    chat.innerHTML += `<div class="chat-message user-message"><strong>You:</strong> ${message}</div>`;

    const loadingIndicator = document.getElementById('loading');
    loadingIndicator.style.display = 'block';

    try {
        const response = await fetch('https://api.cohere.ai/generate', {
            method: 'POST',
            headers: {
                'Authorization': 'Bearer DgvzJhcAm5YFe3tmrJGl3bJQmidhk7wSfxnSvIiw',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                model: 'command-xlarge',
                prompt: message,
                max_tokens: 300,
                temperature: 0.7
            })
        });

        const data = await response.json();
        loadingIndicator.style.display = 'none';

        const formattedResponse = data.text
            ? data.text.replace(/\n/g, '<br>') // Convert new lines to <br> tags
            : 'Sorry, there was an error.';

        chat.innerHTML += `<div class="chat-message bot-message"><strong>Bot:</strong> <span>${formattedResponse}</span></div>`;
    } catch (error) {
        console.error('Error:', error);
        loadingIndicator.style.display = 'none';
        chat.innerHTML += `<div class="chat-message bot-message"><strong>Bot:</strong> Sorry, there was an error.</div>`;
    } finally {
        messageInput.value = '';
        chat.scrollTop = chat.scrollHeight;
    }
}

function copyToClipboard(elementId) {
    const codeElement = document.getElementById(elementId);
    const codeText = codeElement.textContent; // Get raw code text
    navigator.clipboard.writeText(codeText).then(() => {
        alert('Code copied to clipboard!');
    }).catch(err => {
        alert('Could not copy text: ', err);
    });
}

function checkEnter(event) {
    if (event.key === 'Enter') {
        sendMessage();
    }
}

document.addEventListener('DOMContentLoaded', function() {
    const content = document.querySelector('.content');
    const sidebar = document.getElementById('sidebar');
    const toggleButton = document.getElementById('toggleSidebar');

    toggleButton.addEventListener('click', function() {
        sidebar.classList.toggle('hidden');

        if (sidebar.classList.contains('hidden')) {
            content.style.marginLeft = '0';
        } else {
            content.style.marginLeft = '250px';
        }
    });
});

document.addEventListener('DOMContentLoaded', function() {
    const content = document.querySelector('.content');
    const sidebar = document.getElementById('sidebar');

    function handleResize() {
        if (window.innerWidth <= 768) {
            sidebar.classList.remove('show');
            content.style.marginLeft = '0';
        } else {
            sidebar.classList.add('show');
            content.style.marginLeft = '250px';
        }
    }

    window.addEventListener('resize', handleResize);
    handleResize();
});

function sendFeedback(isHelpful) {
    const feedbackMessage = isHelpful
        ? "Thanks for your feedback!"
        : "Sorry to hear that!";

    Swal.fire({
        icon: isHelpful ? 'success' : 'info',
        title: feedbackMessage,
        showConfirmButton: false,
        timer: 1500
    });

    document.querySelector('.feedback-section').style.display = 'none';
}

function showFeedbackSection() {
    document.querySelector('.feedback-section').style.display = 'block';
}
</script>

</body>
</html>
